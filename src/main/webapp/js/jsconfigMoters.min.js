var initTableParams=null;function InitTableParams(g,f,e,b,c,a,d){this.txtdadesCargades=g;this.txtlast=f;this.txtnext=e;this.txtprevious=b;this.txtfirst=c;this.txtloading=a;this.txtborrat=d}function saveMoters(a){numMot=$("#"+a).val();data="id="+a+"&num="+numMot;$.ajax({type:"POST",url:"/onlineBot/admin/saveMoters.action",dataType:"json",data:data,success:function(b){if(b!=null&&b.error!=null){$("#errorsajaxlabel").text(b.error);$("#errorsajax").show()}else{alert("Saved")}},error:function(b){$("#errorsajaxlabel").text("Error in ajax call");$("#errorsajax").show()}})}var oTableMoters=null;var dia=null;var giCount=2;$(document).ready(function(){now=new Date();selectedDate=new Date();document.getElementById("div_calendar").innerHTML="";loadCalendar("ca");var d=now.getDate();var c=now.getFullYear();var a=now.getMonth()+1;var b=d+"-"+a+"-"+c;oTableMoters=$("#tbl_moters").dataTable({iDisplayLength:22,aoColumns:[{mDataProp:"dia",bSortable:false,sWidth:"50px"},{mDataProp:"h0800",bSortable:false,sWidth:"50px"},{mDataProp:"h0830",bSortable:false,sWidth:"20px"},{mDataProp:"h0900",bSortable:false,sWidth:"20px"},{mDataProp:"h0930",bSortable:false,sWidth:"20px"},{mDataProp:"h1000",bSortable:false,sWidth:"20px"},{mDataProp:"h1030",bSortable:false,sWidth:"20px"},{mDataProp:"h1100",bSortable:false,sWidth:"20px"},{mDataProp:"h1130",bSortable:false,sWidth:"20px"},{mDataProp:"h1200",bSortable:false,sWidth:"20px"},{mDataProp:"h1230",bSortable:false,sWidth:"20px"},{mDataProp:"h1300",bSortable:false,sWidth:"20px"},{mDataProp:"h1330",bSortable:false,sWidth:"20px"},{mDataProp:"h1400",bSortable:false,sWidth:"20px"},{mDataProp:"h1430",bSortable:false,sWidth:"20px"},{mDataProp:"h1500",bSortable:false,sWidth:"20px"},{mDataProp:"h1530",bSortable:false,sWidth:"20px"},{mDataProp:"h1600",bSortable:false,sWidth:"20px"},{mDataProp:"h1630",bSortable:false,sWidth:"20px"},{mDataProp:"h1700",bSortable:false,sWidth:"20px"},{mDataProp:"h1730",bSortable:false,sWidth:"20px"},{mDataProp:"h1800",bSortable:false,sWidth:"20px"},{mDataProp:"h1830",bSortable:false,sWidth:"20px"},{mDataProp:"h1900",bSortable:false,sWidth:"20px"},{mDataProp:"h1930",bSortable:false,sWidth:"20px"},{mDataProp:"h2000",bSortable:false,sWidth:"20px"},{mDataProp:"h2030",bSortable:false,sWidth:"20px"},{mDataProp:"h2100",bSortable:false,sWidth:"20px"},{mDataProp:"h2130",bSortable:false,sWidth:"20px"},{mDataProp:"h2200",bSortable:false,sWidth:"20px"},{mDataProp:"h2230",bSortable:false,sWidth:"20px"},{mDataProp:"h2300",bSortable:false,sWidth:"20px"},{mDataProp:"h2330",bSortable:false,sWidth:"20px"},{mDataProp:"h2400",bSortable:false,sWidth:"20px"}],sPaginationType:"full_numbers",oLanguage:{sProcessing:"<img src='/onlineBot/images/large-loading.gif' style='vertical-align:middle'>&nbsp;"+initTableParams.txtloading,oPaginate:{sFirst:"<img src='/onlineBot/images/icono-paginador-inicio.gif' style='vertical-align:middle'>&nbsp;"+initTableParams.txtfirst,sLast:initTableParams.txtlast+"&nbsp;<img src='/onlineBot/images/icono-paginador-fin.gif' style='vertical-align:middle'>",sNext:initTableParams.txtnext+"&nbsp;<img src='/onlineBot/images/icono-paginador-siguiente.gif' style='vertical-align:middle'>",sPrevious:"<img src='/onlineBot/images/icono-paginador-anterior.gif' style='vertical-align:middle'>&nbsp;"+initTableParams.txtprevious}},sScrollY:"800",sScrollX:"352",bScrollCollapse:true,bProcessing:false,bServerSide:false,sAjaxSource:"/onlineBot/admin/ajaxTableMotersAction.action",fnServerData:function(f,e,g){if(b==""){return}e.push({name:"dia",value:b});$.ajax({url:f,data:e,dataType:"json",cache:false,success:function(h){if(h.error!=null){$("#errorsajaxlabel").text(h.error);$("#errorsajax").show()}else{g(h);$("#tbl_moters_paginate").hide()}},error:function(h){$("#errorsajaxlabel").text("Error in ajax call");$("#errorsajax").show()}})}})});function deleteRow(e){var b=now.getFullYear();var c=now.getMonth()+1;var d=e+"-"+c+"-"+b;var a="";$.each(oTableMoters.fnGetData(),function(h,f){var g=f.dia;if(g==d){a=h}});if(a!=""){oTableMoters.fnDeleteRow(a)}}function fnClickAddRow(b){data="dia="+b;var c="";var a="";$.ajax({type:"POST",url:"/onlineBot/admin/ajaxTableMotersAction.action",dataType:"json",data:data,success:function(e){if(e!=null&&e.error!=null){$("#errorsajaxlabel").text(e.error);$("#errorsajax").show()}else{var d=oTableMoters.fnAddData([e.aaData[0]]);c=oTableMoters.fnSettings().aoData[d[0]].nTr}},error:function(d){$("#errorsajaxlabel").text("Error in ajax call");$("#errorsajax").show()}})}function pad(e,b,d){if(null==e){e=""}var a="";for(var c=0;c<Math.abs(d);c++){a+=b}if(d>0){var g=(e+a);var f=Math.max(e.length,d);return g.substring(0,f)}else{var g=(a+e);var j=g.length+d;var h=g.length;return g.substring(j,h)}}var datepicker=null;function loadCalendar(lang){var local={days:["Diumenge","Dilluns","Dimarts","Dimecres","Dijous","Divendres","Dissabte","Diumenge"],daysShort:["diu","dll","dim","dix","dij","div","dis","diu"],daysMin:["diu","dll","dim","dix","dij","div","dis","diu"],months:["Gener","Febrer","Març","Abril","Maig","Juny","Juliol","Agost","Setembre","Octubre","Novembre","Desembre"],monthsShort:["Gen","Feb","Mar","Abr","Mai","Jun","Jul","Ago","Set","Oct","Nov","Des"],weekMin:"Set"};if(lang=="es"){local={days:["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado","Domingo"],daysShort:["dom","lun","mar","mié","jue","vie","sab","dom"],daysMin:["dom","lun","mar","mié","jue","vie","sab","dom"],months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],monthsShort:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],weekMin:"Sem"}}var year=now.getFullYear();var month=now.getMonth()+1;var oo=[];if(oo!=null){oo=oo.slice(0)}else{oo==[]}oo=[];var hoy=new Date();var hoyYear=hoy.getFullYear();var hoyMonth=hoy.getMonth()+1;var hoyDay=hoy.getDate();var hoy=hoyYear+"-"+pad(hoyMonth,"0",-2)+"-"+pad(hoyDay,"0",-2);$("#div_calendar").DatePicker({flat:true,dateOk:[hoy],dateNook:eval([""]),dateEsp:oo,current:year+"-"+pad(month,"0",-2)+"-01",format:"Y-m-d",calendars:1,mode:"multiple",extraHeight:1,extraWidth:1,starts:1,locale:local});$(".datepickerDays tr td").addClass("hand_cursor").click(function(){$(".datepickerDays tr td").removeClass("green");if(!$(this).hasClass("datepickerNotInMonth")){if($(this).hasClass("border_selected")){$(this).removeClass("border_selected");deleteRow($("span",this).html());return}$(this).addClass("border_selected");clickDay($("span",this).html())}else{var dia=$("span",this).html();if(parseInt(dia)<15){nextYear(lang)}else{previousYear(lang)}}})}function clickDay(d){var a=now.getFullYear();var b=now.getMonth()+1;selectedDate=new Date(a,b,d,0,0,0,0);var c=d+"-"+b+"-"+a;$("#selectedDia").val(c);$("#datePicked").text(c);fnClickAddRow(c)}ButtonPanel=Ext.extend(Ext.Panel,{id:"panelb",layout:"table",defaultType:"button",baseCls:"x-plain",cls:"btn-panel",renderTo:"plantillabut",menu:undefined,split:false,layoutConfig:{columns:3},constructor:function(f,e){for(var d=0,a;a=e[d];d++){a.menu=this.menu;a.enableToggle=this.enableToggle;a.split=this.split;a.arrowAlign=this.arrowAlign}var c=[{xtype:"box",autoEl:{tag:"h3",html:f,style:"padding:15px 0 3px;"},colspan:3}].concat(e);ButtonPanel.superclass.constructor.call(this,{items:c})}});function nextYear(a){document.getElementById("div_calendar").innerHTML="";now.setDate(1);now.setMonth(now.getMonth()+1);loadCalendar(a)}function previousYear(a){document.getElementById("div_calendar").innerHTML="";now.setDate(1);now.setMonth(now.getMonth()-1);loadCalendar(a)};