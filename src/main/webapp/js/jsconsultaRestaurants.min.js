var initTableParams=null;function InitTableParams(h,f,c,d,a,e,g,b){this.txtlast=h;this.txtnext=f;this.txtprevious=c;this.txtfirst=d;this.txtloading=a;this.txtborrat=e;this.txtconfirmborraplat=g;this.txtconfirmborrarest=b}function deleteRestaurant(c){var b=confirm(initTableParams.txtconfirmborrarest);if(b==false){return}else{var a=document.getElementById("idRestaurant").value;data="idRestaurant="+a;$.ajax({type:"POST",url:"/onlineBot/admin/ajaxDeleteRestaurantAction.action",dataType:"json",data:data,success:function(d){if(d!=null&&d.error!=null){$("#errorsajaxlabel").text(d.error);$("#errorsajax").show()}else{alert(initTableParams.txtborrat);reloadTableRestaurants()}},error:function(d){$("#errorsajaxlabel").text("Error in ajax call");$("#errorsajax").show()}})}}function deletePlat(c){var b=confirm(initTableParams.txtconfirmborraplat);if(b==false){return}else{var a=document.getElementById("idRestaurant").value;data="idPlat="+c+"&idRestaurant="+a;$.ajax({type:"POST",url:"/onlineBot/admin/ajaxDeletePlatAction.action",dataType:"json",data:data,success:function(d){if(d!=null&&d.error!=null){$("#errorsajaxlabel").text(d.error);$("#errorsajax").show()}else{alert(initTableParams.txtborrat);reloadTablePlats()}},error:function(d){$("#errorsajaxlabel").text("Error in ajax call");$("#errorsajax").show()}})}}function showDivRestaurant(a){data="id="+a;$.ajax({type:"POST",url:"/onlineBot/admin/ajaxLoadRestaurantAction.action",dataType:"json",data:data,success:function(b){if(b==null||b.error!=null){$("#errorsajaxlabel").text(b.error);$("#errorsajax").show()}else{if(b.nom!=null){document.getElementById("nomrestaurant").value=b.nom}if(b.descripcio!=null){document.getElementById("descrestaurant").value=b.descripcio}if(b.id!=null){document.getElementById("idRestaurant").value=b.id}if(b.foto!=null){document.getElementById("imageRestaurant").src="/onlineBot/admin/ImageAction.action?imageId="+b.foto.id}else{document.getElementById("imageRestaurant").src="../images/noFoto.gif"}$("#inforestaurant").show("slow");reloadTablePlats()}},error:function(b){$("#errorsajaxlabel").text("Error in ajax call");$("#errorsajax").show()}})}function goToPlatInfo(a){window.location.href="/onlineBot/admin/plat.action"}function reloadTablePlats(){oTablePlats.fnDeleteRow(0)}function reloadTableRestaurants(){oTableRest.fnDeleteRow(0)}var oTableRest=null;var oTablePlats=null;$(document).ready(function(){oTableRest=$("#tbl_restaurants").dataTable({iDisplayLength:2,aoColumns:[{mDataProp:"nom",bSortable:false,sWidth:"150px"},{mDataProp:"descripcio",bSortable:false,sWidth:"350px"},{mDataProp:"accio",bSortable:false,sWidth:"40px"}],sPaginationType:"full_numbers",oLanguage:{sProcessing:"<img src='/onlineBot/images/large-loading.gif' style='vertical-align:middle'>&nbsp;"+initTableParams.txtloading,oPaginate:{sFirst:"<img src='/onlineBot/images/icono-paginador-inicio.gif' style='vertical-align:middle'>&nbsp;"+initTableParams.txtfirst,sLast:initTableParams.txtlast+"&nbsp;<img src='/onlineBot/images/icono-paginador-fin.gif' style='vertical-align:middle'>",sNext:initTableParams.txtnext+"&nbsp;<img src='/onlineBot/images/icono-paginador-siguiente.gif' style='vertical-align:middle'>",sPrevious:"<img src='/onlineBot/images/icono-paginador-anterior.gif' style='vertical-align:middle'>&nbsp;"+initTableParams.txtprevious}},sScrollY:"100",sScrollX:"152",bScrollCollapse:true,bProcessing:false,bServerSide:true,sAjaxSource:"/onlineBot/admin/ajaxTableRestaurantsAction.action",fnServerData:function(b,a,c){$.ajax({url:b,data:a,dataType:"json",cache:false,success:function(d){if(d.error!=null){$("#errorsajaxlabel").text(d.error);$("#errorsajax").show()}else{c(d)}},error:function(d){$("#errorsajaxlabel").text("Error in ajax call");$("#errorsajax").show()}})}});$("#tbl_restaurants tbody").click(function(a){$(oTableRest.fnSettings().aoData).each(function(){$(this.nTr).addClass("select_ro")});$(a.target.parentNode).removeClass("odd");$(a.target.parentNode).removeClass("even");var b=a.target.parentNode.firstChild.id;showDivRestaurant(b)});oTablePlats=$("#tbl_plats").dataTable({iDisplayLength:2,aoColumns:[{mDataProp:"nom",bSortable:false},{mDataProp:"descripcio",bSortable:false},{mDataProp:"preu",bSortable:false},{mDataProp:"accio",bSortable:false}],sPaginationType:"full_numbers",oLanguage:{sProcessing:"<img src='/onlineBot/images/large-loading.gif' style='vertical-align:middle'>&nbsp;"+initTableParams.txtloading,oPaginate:{sFirst:"<img src='/onlineBot/images/icono-paginador-inicio.gif' style='vertical-align:middle'>&nbsp;"+initTableParams.txtfirst,sLast:initTableParams.txtlast+"&nbsp;<img src='/onlineBot/images/icono-paginador-fin.gif' style='vertical-align:middle'>",sNext:initTableParams.txtnext+"&nbsp;<img src='/onlineBot/images/icono-paginador-siguiente.gif' style='vertical-align:middle'>",sPrevious:"<img src='/onlineBot/images/icono-paginador-anterior.gif' style='vertical-align:middle'>&nbsp;"+initTableParams.txtprevious}},sScrollY:"100",sScrollX:"152",bScrollCollapse:true,bProcessing:false,bServerSide:true,sAjaxSource:"/onlineBot/admin/ajaxTablePlatsAction.action",fnServerData:function(b,a,d){var c=$("#idRestaurant").val();if(c==""){return}a.push({name:"id",value:c});$.ajax({url:b,data:a,dataType:"json",cache:false,success:function(e){if(e.error!=null){$("#errorsajaxlabel").text(e.error);$("#errorsajax").show()}else{d(e)}},error:function(f){$("#errorsajaxlabel").text("Error in ajax call");$("#errorsajax").show()}})}});$("#inforestaurant").hide();$("#errorsajax").hide()});