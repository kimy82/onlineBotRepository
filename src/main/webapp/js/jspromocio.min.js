var initTableParams=null;function InitTableParams(e,b,g,d,i,c,a,h,f){this.txtlast=e;this.txtnext=b;this.txtprevious=g;this.txtfirst=d;this.txtloading=i;this.txtborrat=c;this.txtconfirmborrapromo=a;this.txterrordouble=h;this.txterrornumber=f}function onlyDouble(a,b){if(a==""||/^[0-9]*\.[0-9]*$/.test(a)){$("#"+b).css("border","solid 1px rgb(135,155,179)")}else{$("#"+b).css("border","solid 1px red");alert(initTableParams.txterrordouble)}}function onlyEntero(a,b){if(a==""||/^[0-9]*$/.test(a)){$("#"+b).css("border","solid 1px rgb(135,155,179)")}else{$("#"+b).css("border","solid 1px red");alert(initTableParams.txterrornumber)}}function opendivNewPromo(){resetForm();$("#infopromonew").show("slow");$("#pnc_div").hide();$("#apd_div").hide()}function resetForm(){$("#nompromo_apd").val("");$("#tipuDescompte_apd").val("");$("#descompteImport_apd").val("");$("#importAPartirDe").val("");$("#dia").val("");$("#nompromo_pnc").val("");$("#tipuDescompte_pnc").val("");$("#descompteImport_pnc").val("");$("#numComandes").val("");$("#temps").val("");$("#id_apd").val("");$("#id_pnc").val("")}function openDivTipuPromo(a){if(a=="pnc"){$("#pnc_div").show("slow");$("#apd_div").hide()}else{$("#apd_div").show("slow");$("#pnc_div").hide()}}function reloadTablePromos(){oTablePromos.fnDeleteRow(0)}function goToPromocio(a){data="idPromocio="+a;$.ajax({type:"POST",url:"/onlineBot/admin/ajaxLoadPromoAction.action",dataType:"json",data:data,success:function(b){if(b==null||b.error!=null){$("#errorsajaxlabel").text(b.error);$("#errorsajax").show()}else{if(b.tipus=="apd"){$("#id_apd").val(b.id);$("#nompromo_apd").val(b.nom);$("#tipuDescompte_apd").val(b.tipuDescompte);$("#descompteImport_apd").val(b.descompteImport);$("#importAPartirDe").val(b.importAPartirDe);$("#dia").val(b.diaString);$("#infopromonew").show("slow");$("#apd").click()}if(b.tipus=="pnc"){$("#id_pnc").val("");$("#nompromo_pnc").val(b.nom);$("#tipuDescompte_pnc").val(b.tipuDescompte);$("#descompteImport_pnc").val(b.descompteImport);$("#numComandes").val(b.numComandes);$("#temps").val(b.temps);$("#infopromonew").show("slow");$("#pnc").click()}}},error:function(b){$("#errorsajaxlabel").text("Error in ajax call");$("#errorsajax").show()}})}function deletePromocio(b){var a=confirm(initTableParams.txtconfirmborrapromo);if(a==false){return}else{data="idPromocio="+b;$.ajax({type:"POST",url:"/onlineBot/admin/ajaxDeletePromocio.action",dataType:"json",data:data,success:function(c){if(c!=null&&c.error!=null){$("#errorsajaxlabel").text(c.error);$("#errorsajax").show()}else{alert(initTableParams.txtborrat);reloadTablePromos()}},error:function(c){$("#errorsajaxlabel").text("Error in ajax call");$("#errorsajax").show()}})}}var oTablePromos=null;$(document).ready(function(){oTablePromos=$("#tbl_promos").dataTable({iDisplayLength:12,aoColumns:[{mDataProp:"nom",bSortable:false,sWidth:"150px"},{mDataProp:"tipuDescompte",bSortable:false,sWidth:"350px"},{mDataProp:"descompteImport",bSortable:false,sWidth:"40px"},{mDataProp:"accio",bSortable:false,sWidth:"40px"}],sPaginationType:"full_numbers",oLanguage:{sProcessing:"<img src='/onlineBot/images/large-loading.gif' style='vertical-align:middle'>&nbsp;"+initTableParams.txtloading,oPaginate:{sFirst:"<img src='/onlineBot/images/icono-paginador-inicio.gif' style='vertical-align:middle'>&nbsp;"+initTableParams.txtfirst,sLast:initTableParams.txtlast+"&nbsp;<img src='/onlineBot/images/icono-paginador-fin.gif' style='vertical-align:middle'>",sNext:initTableParams.txtnext+"&nbsp;<img src='/onlineBot/images/icono-paginador-siguiente.gif' style='vertical-align:middle'>",sPrevious:"<img src='/onlineBot/images/icono-paginador-anterior.gif' style='vertical-align:middle'>&nbsp;"+initTableParams.txtprevious}},sScrollY:"100",sScrollX:"152",bScrollCollapse:true,bProcessing:false,bServerSide:true,sAjaxSource:"/onlineBot/admin/ajaxTablePromos.action",fnServerData:function(b,a,c){$.ajax({url:b,data:a,dataType:"json",cache:false,success:function(d){if(d.error!=null){$("#errorsajaxlabel").text(d.error);$("#errorsajax").show()}else{c(d)}},error:function(d){$("#errorsajaxlabel").text("Error in ajax call");$("#errorsajax").show()}})}});$("#infopromonew").hide();$("#errorsajax").hide()});